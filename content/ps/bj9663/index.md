---
title: "[백준] 9663 G4 N-Queen"
date: 2025-03-17
toc: true
ps:
  solved: 2025-03-16
  link: https://www.acmicpc.net/problem/9663
---

# 접근

쉽게 문제에 접근하기 위한 꽤 중요한 아이디어는 한 행에는 퀸이 딱 하나만 배치될 수 있다는 것이다.

때문에 한 행에 퀸을 배치하고, 다음 행에는 열이 겹치지 않게 퀸을 배치하고, 이런 식으로 반복하면 $N(N-1)(N-2)...1 = N!$의 복잡도일 것이다. 

$O(N!)$의 무시무시한 복잡도이고 시간 제한도 10초이다.

다행인 것은, 퀸을 하나 놓을때 마다, 다음 행에 퀸이 배치될 수 있는 자리가 꽤 줄어든다는 점이다. 

때문에 이 문제는 완전 탐색으로 가능한 모든 해의 공간을 탐색하되, 유망하지 않은 분기를 판단하기 쉬우므로 **백 트래킹**을 적용하면 쉽게 풀 수 있다.

# 알고리즘

위에서도 이야기했듯, 문제에 쉽게 접근하려면 ==한 행에는 퀸이 딱 하나만 배치될 수 있다==는 아이디어가 필요하다.

이 말은 전체 체스판에서 퀸의 위치를 1차원 배열 하나로 나타낼 수 있다는 말이다.

예를 들어, 크기 $N$짜리 `vector<int> queen`을 을 만들었다고 가정하자.   
그러면 `queen[i] == j`라면 `i`행에서 퀸의 위치는 `j`라는 뜻이다.

* 0행부터 시작하며 퀸을 배치한다. (백트래킹 시작)
* 현재 행에서 가능한 모든 열에 대해서 배치 시도를 한다.
  * 이전 열의 모든 퀸들이 현재 배치하려는 열과 부딪히지 않는지 확인한다.
  * 부딪히지 않으면 배치하고, 다음 행으로 넘어가서 반복한다.
  * 불가능하다면 원래 상태로 복구한다.
* 만일 끝행에 도달했으면, $N$개의 퀸을 배치한 하나의 가짓수를 발견한 것이므로 갯수를 증가시킨다.

> `[참고]` 체스판 위의 두 지점에 대해서 각 지점의 행과 열 차이가 같으면 같은 대각선에 있다는 논리는 유용하게 사용될수 있을 것 같다.

# 코드

{{< hlc "assets/code.cc" "cpp" >}}
